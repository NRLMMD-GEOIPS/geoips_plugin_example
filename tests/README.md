    # # # This source code is protected under the license referenced at
    # # # https://github.com/NRLMMD-GEOIPS.

Running test scripts
--------------------
```
# Run an individual test script - each test script must return
# 0 for successful run, or non-zero for failed
$GEOIPS_PACKAGES_DIR/geoips_plugin_example/tests/scripts/<script_name>.sh

# Test ALL functionality within the current repo
$GEOIPS_PACKAGES_DIR/geoips_plugin_example/tests/test_all.sh
```

Creating a new test repo
------------------------
Create a new test data repo for your data type, and populate it with
data and appropriate sector information (if it would be helpful to know
where the data is located).
```
mkdir -p $GEOIPS_TESTDATA_DIR/test_data_<type>
mkdir $GEOIPS_TESTDATA_DIR/test_data_<type>/data
mkdir $GEOIPS_TESTDATA_DIR/test_data_<type>/sectors
```

Creating a new test script
--------------------------
Ensure you have the appropriate GeoIPS Python environment enabled.

Now create a script that calls the appropriate run_procflow command(s),
and exits with 0 if all processing was completed successfully,
and exits with a non-zero return code if any processing failed.

To ensure known output was produced correctly, run_procflow should be
called with the --compare_path option.

Updating new test outputs
-------------------------

Once you've created a new test script, and produced valid test outputs,
update the test repo and test_all.sh script:
```
# Copy new files into appropriate test output directories
# scripts are autogenerated to copy currently processed outputs into the
# comparison directory specified by --compare_path in the run_procflow command
source tests/outputs/abi_aws/Infrared-Test_image/diff_test_output_$USER/cp_MISSINGCOMPARE.txt

# Delete all the unnecessary files from the test repos
# scripts are autogenerated to delete existing files in the comparison
# directory that were NOT successfully produced during the current run.
source tests/outputs/abi_aws/Infrared-Test_image/diff_test_output_$USER/rm_MISSINGPRODUCT.txt

# git commit appropriately
# git push

# Add your new call to test_all.sh so we ensure it is in the testing rotation:
# add something like
#   "$GEOIPS_PACKAGES_DIR/geoips_plugin_example/tests/scripts/abi_aws.sh"
# to test_all.sh
vim $GEOIPS_PACKAGES_DIR/geoips_plugin_example/tests/test_all.sh
```
